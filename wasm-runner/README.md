# Mavros WASM Runner

Executes WASM files generated by Mavros LLVM codegen and outputs witnesses and constraints.

## Prerequisites

Build the WASM runtime (provides fast field arithmetic):

```bash
# From the workspace root
cargo build --release -p mavros-wasm-runtime --target wasm32-unknown-unknown
```

## Build

```bash
cd wasm-runner
npm install
npm run build
```

## Usage

```bash
node dist/index.js <project-root>
```

Where `<project-root>` is a Noir project that has been compiled with `mavros --emit-wasm`.

### Example

```bash
# First, generate the WASM artifact
mavros --root ./my-noir-project --emit-wasm

# Then run it
cd wasm-runner
node dist/index.js ./my-noir-project
```

## Expected Project Structure

```
<project-root>/
  Prover.toml                      # Input values
  mavros_debug/
    witgen.wasm                    # Generated WASM artifact
    witgen.wasm.meta.json          # Metadata
```

## Input Format

The runner reads inputs from `Prover.toml`:

```toml
x = "2"
y = "123"
```

## Output Format

Output is written to `<project-root>/mavros_debug/output.json`:

```json
{
  "witnesses": ["0x0000...0002", "0x0000...0004", ...],
  "constraints": {
    "a": ["0x...", ...],
    "b": ["0x...", ...],
    "c": ["0x...", ...]
  }
}
```

Field elements are output as 64-character hex strings (256-bit values).
